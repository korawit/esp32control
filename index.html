<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Firebase Auth with Email and Password!</title>

  <!-- Firebase SDK (Modular Version) --> 
  <script type="module">
    // Import the Firebase modules needed
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-auth.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-database.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-analytics.js";

    // Firebase Configuration
    const firebaseConfig = {
    apiKey: "",
    authDomain: "",
    databaseURL: "",
    projectId: "",
    storageBucket: "",
    messagingSenderId: "",
    appId: "",
    measurementId: ""
  };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const database = getDatabase(app);
    const analytics = getAnalytics(app);

    // Get references to elements
    const loginButton = document.getElementById("loginButton");
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const errorMessage = document.getElementById("errorMessage");
    const authContainer = document.getElementById("authContainer");

    // Handle login
    loginButton.addEventListener("click", async () => {
      const email = emailInput.value;
      const password = passwordInput.value;

      try {
        await signInWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          // Signed in
          const user = userCredential.user;
          const uid = user.uid;
          console.log("User ID: ", uid);
          authContainer.style.display = "none"; // Hide login form
          // ...
        });
       
      } catch (error) {
        errorMessage.textContent = error.message;
      }
    });

    // Handle logout
    logoutButton.addEventListener("click", async () => {
      try {
        await signOut(auth);
        appContainer.style.display = "none"; // Hide app content
        authContainer.style.display = "block"; // Show login form
      } catch (error) {
        errorMessage.textContent = error.message;
      }
    });

  </script>

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f3f4f6;
    }
    .container {
      text-align: center;
    }
    .btn {
      font-size: 20px;
      padding: 10px 20px;
      cursor: pointer;
      border: none;
      background-color: #4CAF50;
      color: white;
    }
    .input-field {
      padding: 10px;
      margin: 10px;
      width: 200px;
    }
    .message {
      margin-top: 10px;
      font-size: 18px;
    }
    .number {
      font-size: 36px;
      margin-top: 20px;
      padding: 10px;
    }
    .text-box {
      padding: 10px;
      margin: 10px;
      width: 200px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Firebase Auth and Toggle</h1>
    
    <!-- Login Form -->
    <div id="authContainer">
      <h2>Login</h2>
      <input type="email" id="email" class="input-field" placeholder="Email" required>
      <input type="password" id="password" class="input-field" placeholder="Password" required>
      <button class="btn" id="loginButton">Login</button>
      <p id="errorMessage" class="message"></p>
    </div>

    <!-- App Content (Only visible after login) -->
    <div id="appContainer" style="display: none;">
      <button class="btn" id="toggleButton">Toggle LED</button>
      <div id="ledStatus" class="number">LED Status: OFF</div>
      <div id="numberValue" class="number">Number: 0</div>
      <button class="btn" id="logoutButton">Logout</button>

      <!-- Textbox and Send Button for Message -->
      <div>
        <input type="text" id="messageInput" class="text-box" placeholder="Enter your message" />
        <button class="btn" id="sendMessageButton">Send Message</button>
      </div>

      <!-- Display the message from Firebase -->
      <div id="displayedMessage" class="message">Message: No message yet</div>
    </div>
  </div>
</body>
</html>
